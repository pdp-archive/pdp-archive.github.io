---
layout: solution
codename: missing
---

## Επεξήγηση εκφώνησης 

Σε μια ακολουθία $$N$$ συνεχόμενων ακέραιων αριθμών $$1,2,3,\ldots ,N$$, λείπουν $$K$$ από αυτούς 
ενώ οι υπόλοιποι $$M$$ είναι κρυμμένοι. 
Ζητείται να βρεθούν οι $$K$$ αριθμοί που λείπουν με περιορισμένο αριθμό ερωτήσεων $$Q$$. Κάθε ερώτηση, 
αποκαλύπτει έναν κρυμμένο αριθμό σε θέση που επιλέγουμε. Μας δίνεται το πλήθος των κρυμμένων 
αριθμών $$M$$ και ότι δεν λείπει κανένας αριθμός μετά από τον δεξιότερο κρυμμένο. 

Δεν γνωρίζουμε πόσοι αριθμοί λείπουν, ούτε πόσοι είναι όλοι οι αριθμοί της ακολουθίας. 
Εφόσον γνωρίζουμε ότι δεν λείπει κανένας αριθμός μετά τον τελευταίο, ο τελευταίος είναι ο $$N$$. 
Θα ξοδέψουμε ένα ερώτημα για να ανακαλύψουμε τον $$N$$, και ταυτόχρονα 
υπολογίζουμε ότι λείπουν $$K=N-M$$.

Η ερώτηση του αριθμού μιας θέσης, απαιτεί μια εκτύπωση στο standard output, άδειασμα της προσωρινής μνήμης 
(``fflush``) και διάβασμα της απάντησης. Φτιάχνοντας την συνάρτηση ``query`` που κάνει αυτές τις εργασίες 
οργανώνουμε καλύτερα τον κώδικα.

## Λύση brute force (13%)
 
Στο υποπρόβλημα αυτό, έχουμε στη διάθεση μας αρκετά ερωτήματα για να ανακαλύψουμε έναν έναν όλους τους κρυμμένους αριθμούς. 
Όσοι αριθμοί ανάμεσα στο $$1$$ και στο $$N$$ δεν περιέχονται σε αυτούς που ανακαλύψαμε, είναι αυτοί που λείπουν.
Απαιτούμενος αριθμός ερωτημάτων για τον [κώδικα]({% include link_to_source.md solution_name='missing_sub1_13pt.cc' %}), 
$$O(N)$$.

## Λύση με δυαδική αναζήτηση για $$K=1$$ (24%)

Στο υποπρόβλημα αυτό, λείπει μόνο ένας αριθμός. 

**Παρατήρηση 1η:** κάθε θέση $$i$$ περιέχει τον αριθμό $$i$$ αν δεν λείπει κανένας μικρότερος αριθμός. 
Αν παραδείγματος χάριν, λείπει μόνο ο αριθμός $$a$$, όλοι οι αριθμοί $$1,2,\ldots,a-1$$ βρίσκονται στην 
αναμενόμενη θέση τους $$1,2,\ldots,a-1$$ και όλοι 
οι αριθμοί $$a+1,a+2,\ldots,N$$ βρίσκονται μια θέση αριστερότερα, δηλαδή στις 
$$a,a+1,\ldots,N-1$$ αντίστοιχα. 

Κάνοντας δυαδική αναζήτηση, εντοπίζουμε την πρώτη θέση $$i$$ 
στην οποία ο αριθμός που κρύβεται σε αυτή, δεν είναι ίσος με το $$i$$.

{% include code.md solution_name='missing_sub2_29pt.cc' start=17 end=26 %}

Απαιτούνται $$O(\log{N})$$ ερωτήματα για τη λύση αυτή. 
Ολόκληρος ο κώδικας ([εδώ]({% include link_to_source.md solution_name='missing_sub2_29pt.cc' %}))

## Λύση με δυαδική αναζήτηση *ενός διαστήματος* (18%)

Στο υποπρόβλημα αυτό, λείπει ένα συνεχόμενο διάστημα αριθμών. 
Αναζητούμε όπως και στην προηγούμενη λύση, τον πρώτο αριθμό που δεν βρίσκεται στην θέση του και συγκεκριμένα 
θα βρίσκεται $$K$$ θέσεις αριστερότερα από την αναμενόμενη θέση του, οπότε τυπώνουμε 
τους $$K=N-M$$ αριθμούς που προηγούνται και λείπουν.

{% include code.md solution_name='missing_sub3_18pt.cc' start=20 end=32 %}

Απαιτούνται $$O(\log{N})$$ ερωτήματα για τη λύση αυτή. 
Ολόκληρος ο κώδικας ([εδώ]({% include link_to_source.md solution_name='missing_sub3_18pt.cc' %}))

## Υποβέλτιστη λύση με δυαδική αναζήτηση (17%)

Στο υποπρόβλημα αυτό λείπουν $$K$$ αριθμοί. 
Για κάθε $i$-οστό  αριθμό που λείπει, οι 
επόμενοι κρυμμένοι αριθμοί, θα βρίσκονται αριστερότερα τόσες θέσεις, όσες όλοι οι μικρότεροι από αυτούς 
αριθμοί που λείπουν. Αρκεί να κάνουμε δυαδική αναζήτηση με την επιθυμητή διαφορά ανάμεσα στην 
θέση ενός κρυμμένου αριθμού και στην τιμή του, για να βρούμε τον $$i$$-οστό αριθμό.  

Προσοχή χρειάζεται στην περίπτωση που λείπουν διαδοχικοί αριθμοί, διότι όλες οι δυαδικές αναζητήσεις 
για την εύρεση των θέσεων τους, θα δώσουν την ίδια θέση του πρώτου κρυμμένου αριθμού αμέσως μετά από αυτούς.
Χρησιμοποιώντας ένα ζεύγος ακεραίων (pair) με τη θέση και το πλήθος των αριθμών 
που λείπουν, μπορούμε να αναπαραστήσουμε την ακολουθία των αριθμών που λείπουν αποδοτικά.

{% include code.md solution_name='missing_sub4_17pt.cc' start=21 end=40 %}

Απαιτούνται $$O(K \cdot \log{N})$$ ερωτήματα για τη λύση αυτή. 
Ολόκληρος ο κώδικας ([εδώ]({% include link_to_source.md solution_name='missing_sub4_17pt.cc' %}))


## Βέλτιστη λύση με δυαδική αναζήτηση (100%)

Στο προηγούμενο υποπρόβλημα, ξεκινώντας δυαδική αναζήτηση για κάθε έναν από τους $$K$$ αριθμούς, 
κάναμε πολλές φορές ερωτήματα για τις ίδιες θέσεις αριθμών. Αν αποθηκεύσουμε τους αριθμούς (memoization) 
που ανακαλύψαμε με τα ερωτήματα μας και δεν τα επαναλάβουμε, θα μειώσουμε αρκετά τον 
συνολικό αριθμό των ερωτημάτων.

{% include code.md solution_name='missing_bsearch_100pt.cc' start=8 end=17 %}
Ολόκληρος ο κώδικας ([εδώ]({% include link_to_source.md solution_name='missing_bsearch_100pt.cc' %}))

## Βέλτιστη λύση με την τεχνική *διαίρει και βασίλευε* (100%)

Πληροφορίες για την τεχνική διαίρει και βασίλευε, 
μπορείτε να βρείτε [εδώ](https://en.wikipedia.org/wiki/Divide-and-conquer_algorithm).
Η τεχνική διαίρει και βασίλευε είναι ένας αναδρομικός τρόπος επίλυσης προβλημάτων που διαιρεί ένα 
μεγάλο διάστημα σε μικρότερα χωρίς να ελέγχει καμία θέση πάνω από μια φορά 
(δεν υπάρχουν επικαλύψεις διαστημάτων). Λύνουμε το πρόβλημα στα μικρότερα διαστήματα 
και κατόπιν συνενώνοντας τις επιμέρους λύσεις, έχουμε τη λύση για το αρχικό πρόβλημα.

Διαιρούμε συνεχώς το διάστημα των θέσεων των κρυμμένων αριθμών σε δύο τμήματα 
περίπου ίσου μεγέθους αναδρομικά. 
Ταυτόχρονα διατηρούμε το διάστημα των αριθμών που αναμένεται να βρίσκονται σε αυτές τις 
θέσεις αν δεν έλειπε κανείς. 
Καθώς διαιρούμε κάθε διάστημα των κρυμμένων θέσεων, θα βρίσκουμε διαστήματα που:
- θα έχουμε λιγότερους (αλλά όχι κανέναν) αριθμούς που λείπουν, από το πλήθος των κρυμμένων 
θέσεων στο διάστημα αυτό και θα κάνουμε περαιτέρω διαίρεση διαστήματος και διερεύνηση ή 
- θα λείπουν όλοι οι αριθμοί (δηλαδή δεν έχουμε 
καμία θέση στους κρυφούς αριθμούς ενώ έχουμε αριθμούς που θα έπρεπε να 
βρίσκονται στο διάστημα αυτό και λείπουν όλοι), 
- θα έχουμε ίσο πλήθος θέσεων και αριθμών που θα έπρεπε να περιέχονται, άρα δεν λείπει κανείς αριθμός. 

Στις τελευταίες δύο περιπτώσεις δεν χρειάζεται να κάνουμε κανένα επιπλέον ερώτημα (ολοκληρώθηκε 
η διερεύνηση αυτών των διαστημάτων). 
Η αναδρομή θα καταλήξει σε βάθος το πολύ $$O(\log_2{N})$$ καθώς 
διαιρεί συνεχώς με το $$2$$ και τα διαστήματα που θα βρει θα είναι $$O(K)$$, άρα ο συνολικός χρόνος του 
αλγορίθμου θα είναι $$O(K\cdot\log_2{N})$$.

{% include code.md solution_name='missing_dac_100pt.cc' start=15 end=28 %}
Ολόκληρος ο κώδικας ([εδώ]({% include link_to_source.md solution_name='missing_dac_100pt.cc' %}))
