---
layout: solution
codename: voting
---

## Επεξήγηση εκφώνησης

Μας δίνονται $$K$$ ψήφοι για τους $$M$$ υποψήφιους και πρέπει να βρούμε ποιοι από τους υποψηφίους μπορούν να κερδίσουν τις εκλογές, δεδομένου ότι μένουν ακόμα $$N - K$$ ψήφοι να καταμετρηθούν.

## Λύση

Χωρίζουμε το πρόβλημα σε δύο βήματα:
 1. Βρίσκουμε τον αριθμό ψήφων που έχει πάρει ο κάθε υποψήφιος.
 2. Ελέγχουμε για κάθε υποψήφιο αν μπορεί να κερδίσει τις εκλογές με τις ψήφους που έχει συγκεντρώσει.

**Βήμα 1:** Για να μετρήσουμε τις ψήφους του κάθε υποψηφίου κρατάμε έναν πίνακα $$cnt[1..M]$$ και κάθε φορά που βλέουμε ότι ο $$i$$-οστός υποψήφιος πήρε ψήφο, κάνουμε $$\texttt{++}cnt[i]$$.

{% include code.md solution_name='voting_efficient.cc' start=12 end=17 %}

**Βήμα 2:** Έστω ότι ο μέγιστος αριθμός ψήφων που έχει λάβει κάποιος υποψήφιος είναι $$max\_val$$. Η πιο ευνοϊκή εξέλιξη της ψηφοφορίας για τον $$i$$-οστό υποψήφιο είναι να κερδίσει όλες τις υπόλοιπες $$N - K$$ ψήφους.

Υπο αυτές τις συνθήκες οποιοσδήποτε ψηφοφόρος μπορεί να κερδίσει αν παίρνοντας όλες τις υπόλοιπες $$N - K$$ ψήφους, ξεπερνάει το $$max\_val$$, δηλαδή ο $$i$$-οστός υποψήφιος μπορεί να κερδίσει αν $$cnt[i] + N - K > max\_val$$. 

Επιπλέον αν υπάρχει μόνο ένας που προηγείται, δηλαδή μόνο ένας υποψήφιος έχει $$max\_val$$ ψήφους, τότε προφανώς μπορεί να κερδίσει πχ παίρνοντας όλες τις υπόλοιπες $$N - K$$ ψήφους (δηλαδή κερδίζει και όταν $$N = K$$).

Στην υλοποίησή μας ξεκινάμε βρίσκοντας τον μέγιστο αριθμό ψήφων $$max\_val$$ και το πλήθος $$max\_cnt$$ των υποψηφίων που τον έχουν. 

{% include code.md solution_name='voting_efficient.cc' start=20 end=29 %}

Έπειτα με βάση αυτό αποφασίζουμε αν μπορεί ένας υποψήφιος να κερδίσει τις εκλογές.

{% include code.md solution_name='voting_efficient.cc' start=32 end=37 %}

Ο αλγόριθμος μας χρειάζεται $$\mathcal{O}(K + M)$$ χρόνο και $$\mathcal{O}(Μ)$$ μνήμη.

**Σημείωση 1:** Μπορούμε να συμπτύξουμε τις πρώτες δύο επαναλήψεις σε μία (δείτε τον κώδικα [εδώ]({% include link_to_source.md solution_name='voting_shorter.cc' %})). 

**Σημείωση 2:** Μπορούμε να καταμετρήσουμε τις ψήφους χρησιμοποιώντας [map]({% include link_to_source.md solution_name='voting_map.cc' %}) ή [unordered map]({% include link_to_source.md solution_name='voting_unordered_map.cc' %}), αλλά επειδή το $$M$$ είναι σχετικά μικρό, η χρήση πίνακα είναι αρκετά αποδοτική.
